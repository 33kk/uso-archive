# ПланФикс - Тонированный Планировщик (by Kirr) (137926)

### Information
- Author: Kirrrr (unknown)
- Created at: 1/20/2017, 5:20:15 PM
- Updated at: 11/16/2018, 2:17:03 AM
- License: NO-REDISTRIBUTION
- Category: planfix
- Rating: undefined
- Total installs: 156
- Weekly installs: 0


### Description
Стиль добавляет блокам Планировщика рамки с затемнённым фоном. На другие части интерфейса Планфикса стиль никак не влияет.

Применяется для страниц в доменах planfix.ru, planfix.com и planfix.ua.

### Update notes
На скриншоте — внешний вид раздела "Сводные данные" в новом пустом аккаунте в Планфиксе (как он выглядел по состоянию на 20 января 2017).

UPD 21.03.2018: Скриншот довольно сильно отличается от реального на данный момент. Прежде всего, сейчас нет скругления правого-верхнего угла, так как оно было убрано из оригинального оформления ПланФикса. Возможны также небольшие несоответствия с описанием, данным ниже.

Причины создания: 
Практически везде в интерфейсе Планфикса белый фон смотрится естественно и уместно, т.к. на нём отображаются развёрнутые таблицы, как на бумаге. Этот вариант отлично смотрится, когда у отображения есть чёткая табличная структура. Но в планировщике, в отличие от других мест, есть блоки списков и карточки, которые достаточно произвольно размещаются в рабочем пространстве и потому должны быть хорошо различимы и легко выхватываться взглядом. Стандартные бело-серые карточки на белом фоне я воспринимаю плохо — взгляд теряется среди этой белизны. Привыкнуть к такой ситуации я не смог, решил что-то предпринять и результатом стал данный стиль — ясно выделяющий блоки и карточки, но не добавляющий сильно тёмных или насыщенных цветов и по возможности относящийся с уважением к принципам оформления, принятым в интерфейсе Планфикса.

Кроме того, стиль вносит следующие изменения:
— у уведомления, которое отображается в блоке Хроника при отсутствии событий, уменьшена картинка, убрана рамка и уменьшен текст надписей, т.к. в окружении Планировщика это уведомление, по-моему, выглядит слишком громоздко (добавлено 3.02.2017).

Вместо выбранной пары основных цветов фона вполне могли быть другие, но я попробовал много вариантов и больше всех приглянулся именно такой. Выбранный бледно-зелёный цвет уже используются в некоторых местах в интерфейсе Планфикса, к примеру, в настройке списков Планировщика. К тому же, зелёный — это фирменный цвет Планфикса.

Изменения:
 5.02.2017 — Небольшие исправления в отображении границ блоков: добавлены нормальные отступы внизу при открытой правой панели, исправлен верх рамки календаря при размещении его не верхним блоком.
 6.02.2017 — Исправления в формировании вертикальных размеров календарных блоков — их нижние границы теперь не "скачут" выше-ниже. 
 6.02.2017 — Поправлена раскраска блока Расписание. 
 7.02.2017 — Мелкие исправления в формировании размеров блоков. 
 7.02.2017 — Поддержка для экспериментального стиля "Добавить в Планировщик Плюс". 
 8.02.2017 — Добавлена возможность выбрать нейтральный цветовой тон оформления, со стандартным белым фоном и серыми рамками блоков.
 8.02.2017 — Мелкие правки. 
 8.02.2017 — Добавлено окрашивание в соответствии с контекстом "уголка", указывающего выбранный пункт на левой панели (контекстом выявляется через фильтр по url в самом Stylish, а не через селекторы css).
 9.02.2017 — Граница левой панели сделана чуть темнее, чтобы скомпенсировать затемнённый фон Планировщика. 
21.03.2018 — Стиль приведен в соответствие с текущим оформлением Планфикса. Много изменений.
22.03.2018 — Поправил отображение выбранных элементов.
10.11.2018 — Поправил отображение блоков итогов, теперь у них тоже есть поля по бокам.
13.11.2018 — Добавил поддержку списка "Таблица"

Стиль можно использовать одновременно с другими моими стилями для planfix.ru, они не конфликтуют.

Стиль действует для всех страниц в домене planfix.ru, но побочных эффектов на других страницах домена (главная страница, блог, форум, справка), кроме самого пользовательского портала, не замечено. Если хочется чётко ограничить действие стиля доменом пользователя userdomain.planfix.ru, надо вручную отредактировать стиль в Stylish соответствующим образом (изменить целевой домен или задать выражение-фильтр).


Известные недочёты:
1. Ряд неаккуратных мест в отображении связан с тем, что размеры блоков рассчитываются и задаются скриптом на странице и, грубо говоря, его приоритет выше, чем у стиля, и не всегда можно найти обходной путь, чтобы добиться красивого результата. Тёмные рамки вокруг блоков реализованы изменением размеров и "раскраской" элемента, который по изначальному замыслу разработчиков страницы Планировщика является частью внутренней структуры вёрстки и вообще не должен быть видимым.  Особенно любят эти неприятности проявляться при отображении/скрытии правой панели и при отображении скрытии нижней полосы прокрутки — даже когда все соотношения размеров в целом настроены чётко, иногда подсчёты сбоят и размеры немного "скачут". Победить описанные неприятности едва ли получится просто в силу их природы (хотя кое с чем прогресс со временем всё же произошёл). Тут можно только радоваться тому, что неприятности эти не очень страшные, и результат в целом получается достаточно симпатичным. :-)
1.1. Если блок календаря разместить в одной колонке с блоками карточек, то блоки карточек получаются заужены справа, а левые края блоков выровнены по смещённому вправо заголовку календаря (это проще увидеть глазами).
1.2. Блоки имеют странновато смотрящееся неодинаковое отображение нижнего края (где-то есть рамка, где-то нет, где-то она половинной ширины, "затемнение" разной высоты), а в некоторых блоках иногда содержимое чуть-чуть не докручивается до самого конца (скажем, последние 5 минут суток перед полуночью в некоторых представлениях календаря).
1.3. Правый край рабочего поля Планировщика часто немножко подрезан. Это связано как раз с дополнительной шириной, создаваемой тёмной рамкой блоков, о которой "не знает" алгоритм вычисления горизонтальных размеров.
2. Весьма вероятно, что в коде css есть "мёртвые" фрагменты, так как он дописывался достаточно долго вместе с изменениями в страницах Планфикса. К тому же, я не очень большой знаток сss и код местами очевидно корявый, хоть и работающий. Прошу не судить строго.


Пользуйтесь на здоровье! ;-)

Тема на форуме Планфикса: <a href="https://forum.planfix.ru/viewtopic.php?f=34&t=3960" target="_blank">https://forum.planfix.ru/viewtopic.php?f=34&t=3960</a>

P.S. Если стиль окажется для вас полезным и у вас возникнет желание отблагодарить меня условной "чашкой капучино", то это можно легко сделать тут: https://money.yandex.ru/to/410012920197755 :-)

### Screenshots (links to userstyles.org)
![https://userstyles.org/style_screenshots/137926_after.png](https://userstyles.org/style_screenshots/137926_after.png)


### Screenshots (archived)
![https://raw.githubusercontent.com/33kk/uso-archive/flomaster/data/screenshots/137926_after.png](https://raw.githubusercontent.com/33kk/uso-archive/flomaster/data/screenshots/137926_after.png)
